<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.16.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Constructor.io: Constructor.io Netcore Client</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Constructor.io
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.16.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('md__r_e_a_d_m_e.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Constructor.io Netcore Client </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md0"></a></p>
<p><a href="http://constructor.io/">Constructor.io</a> provides search as a service that optimizes results using artificial intelligence (including natural language processing, re-ranking to optimize for conversions, and user personalization).</p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md1"></a>
Documentation</h1>
<p>Full API documentation is available on <a href="https://constructor-io.github.io/constructorio-netcore/">Github Pages</a></p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md2"></a>
Requirements</h1>
<p>Requesting results from your .NET based back-end can be useful in order to control result rendering logic on your server, or augment/hydrate results with data from another system. However, a back-end integration has additional requirements compared to a front-end integration. Please review the <a href="https://github.com/Constructor-io/constructorio-netcore/wiki/Additional-Information-for-Backend-Integrations">Additional Information For Backend Integrations</a> article within the wiki for more detail.</p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md3"></a>
Installation</h1>
<ol type="1">
<li>Follow the directions at <a href="https://www.nuget.org/packages/constructor.io/">Nuget</a> to add the package to your project.</li>
<li>Retrieve your API token and key. You can find this at your <a href="https://constructor.io/dashboard">Constructor.io dashboard</a>.</li>
<li>Create a new instance of the client.</li>
</ol>
<h2 class="doxsection"><a class="anchor" id="autotoc_md4"></a>
Basic Usage</h2>
<div class="fragment"><div class="line">ConstructorioConfig config = <span class="keyword">new</span> ConstructorioConfig(<span class="stringliteral">&quot;apiKey&quot;</span>, <span class="stringliteral">&quot;apiToken&quot;</span>);</div>
<div class="line">ConstructorIO constructorio = <span class="keyword">new</span> ConstructorIO(config);</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md5"></a>
Using with IHttpClientFactory</h2>
<div class="fragment"><div class="line">services.AddHttpClient();</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Register your ConstructorioConfig</span></div>
<div class="line">services.AddSingleton(<span class="keyword">new</span> ConstructorioConfig(<span class="stringliteral">&quot;apiKey&quot;</span>, <span class="stringliteral">&quot;apiToken&quot;</span>));</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Register ConstructorIO with custom HttpClient</span></div>
<div class="line">services.AddScoped&lt;ConstructorIO&gt;(serviceProvider =&gt;</div>
<div class="line">{</div>
<div class="line">    var config = serviceProvider.GetRequiredService&lt;ConstructorioConfig&gt;();</div>
<div class="line">    var httpClient = serviceProvider.GetRequiredService&lt;IHttpClientFactory&gt;().CreateClient();</div>
<div class="line">    config.HttpClient = httpClient;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">new</span> ConstructorIO(config);</div>
<div class="line">});</div>
</div><!-- fragment --><h1 class="doxsection"><a class="anchor" id="autotoc_md6"></a>
Uploading a Catalog</h1>
<p>To upload your product catalog, you will need to create a <span class="tt">CatalogRequest</span>. In this request, you can specify the files you want to upload (items, variations, and item groups) and the section you want to send the upload. You can also set a notification e-mail to be alerted when a file ingestion fails.</p>
<div class="fragment"><div class="line"><span class="comment">// Create a files dictionary and add the relevant files</span></div>
<div class="line">StreamContent itemsStream = <span class="keyword">new</span> StreamContent(File.OpenRead(<span class="stringliteral">&quot;./catalog/items.csv&quot;</span>));</div>
<div class="line">itemsStream.Headers.ContentType = <span class="keyword">new</span> MediaTypeHeaderValue(<span class="stringliteral">&quot;text/csv&quot;</span>);</div>
<div class="line">StreamContent variationsStream = <span class="keyword">new</span> StreamContent(File.OpenRead(<span class="stringliteral">&quot;./catalog/variations.csv&quot;</span>));</div>
<div class="line">variationsStream.Headers.ContentType = <span class="keyword">new</span> MediaTypeHeaderValue(<span class="stringliteral">&quot;text/csv&quot;</span>);</div>
<div class="line">StreamContent itemGroupsStream = <span class="keyword">new</span> StreamContent(File.OpenRead(<span class="stringliteral">&quot;./catalog/item_groups.csv&quot;</span>));</div>
<div class="line">itemGroupsStream.Headers.ContentType = <span class="keyword">new</span> MediaTypeHeaderValue(<span class="stringliteral">&quot;text/csv&quot;</span>);</div>
<div class="line"> </div>
<div class="line">Dictionary&lt;string, StreamContent&gt; files = <span class="keyword">new</span> Dictionary&lt;string, StreamContent&gt;()</div>
<div class="line">{</div>
<div class="line">    { <span class="stringliteral">&quot;items&quot;</span>, itemsStream },</div>
<div class="line">    { <span class="stringliteral">&quot;variations&quot;</span>, variationsStream },</div>
<div class="line">    { <span class="stringliteral">&quot;item_groups&quot;</span>, itemGroupsStream },</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Create a CatalogRequest with files to upload and the section to upload to</span></div>
<div class="line">CatalogRequest request = <span class="keyword">new</span> CatalogRequest(files);</div>
<div class="line">request.Section = <span class="stringliteral">&quot;Products&quot;</span>;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Set a notification e-mail</span></div>
<div class="line">request.NotificationEmail = <span class="stringliteral">&quot;integration@company.com&quot;</span>;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Set the force flag if the catalog should be processed even if it will invalidate a large number of existing items</span></div>
<div class="line">request.Force = <span class="keyword">true</span>;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Send a request to replace the catalog (sync)</span></div>
<div class="line">CatalogResponse response = await constructorio.Catalog.ReplaceCatalog(request);</div>
</div><!-- fragment --><h1 class="doxsection"><a class="anchor" id="autotoc_md7"></a>
Retrieving Autocomplete Results</h1>
<p>To retrieve autocomplete results, you will need to create an <span class="tt">AutocompleteRequest</span>. In this request you can specify the number of results you want per autocomplete section. If the results are for a specific user, you can also create a <span class="tt">UserInfo</span> object, which will allow you to retrieve personalized results.</p>
<div class="fragment"><div class="line"><span class="comment">// Create an AutocompleteRequest with the term to request results for</span></div>
<div class="line">AutocompleteRequest request = <span class="keyword">new</span> AutocompleteRequest(<span class="stringliteral">&quot;rain coat&quot;</span>);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Define the number of results to show per section</span></div>
<div class="line">request.ResultsPerSection = <span class="keyword">new</span> Dictionary&lt;string, int&gt;</div>
<div class="line">{</div>
<div class="line">    { <span class="stringliteral">&quot;Products&quot;</span>, 6 },</div>
<div class="line">    { <span class="stringliteral">&quot;Search Suggestions&quot;</span>, 8 },</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Create a UserInfo object with the unique device identifier and session</span></div>
<div class="line">UserInfo userInfo = <span class="keyword">new</span> UserInfo(<span class="stringliteral">&quot;device-id-1123123&quot;</span>, 5);</div>
<div class="line">request.UserInfo = userInfo;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Add a variations map to request specific variation attributes as an array or object (optional)</span></div>
<div class="line">VariationsMap variationsMap = <span class="keyword">new</span> VariationsMap();</div>
<div class="line">variationsMap.AddGroupByRule(<span class="stringliteral">&quot;url&quot;</span>, <span class="stringliteral">&quot;data.url&quot;</span>);</div>
<div class="line">variationsMap.AddValueRule(<span class="stringliteral">&quot;variation_id&quot;</span>, AggregationTypes.First, <span class="stringliteral">&quot;data.variation_id&quot;</span>);</div>
<div class="line">variationsMap.AddValueRule(<span class="stringliteral">&quot;deactivated&quot;</span>, AggregationTypes.First, <span class="stringliteral">&quot;data.deactivated&quot;</span>);</div>
<div class="line">request.VariationsMap = variationsMap;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Request results as an object</span></div>
<div class="line">AutocompleteResponse response = await constructorio.Autocomplete.GetAutocompleteResults(request);</div>
</div><!-- fragment --><h1 class="doxsection"><a class="anchor" id="autotoc_md8"></a>
Retrieving Search Results</h1>
<p>To retrieve search results, you will need to create a <span class="tt">SearchRequest</span>. In this request you can specify the number of results you want per page, the page you want, sorting instructions, and also filter the results by category or facets. If the results are for a specific user, you can also create a <span class="tt">UserInfo</span> object, which will allow you to retrieve personalized results.</p>
<div class="fragment"><div class="line"><span class="comment">// Create a SearchRequest with the term to request results for</span></div>
<div class="line">SearchRequest request = <span class="keyword">new</span> SearchRequest(<span class="stringliteral">&quot;peanut butter&quot;</span>);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Add in additional parameters</span></div>
<div class="line">request.ResultsPerPage = 5;</div>
<div class="line">request.Page = 1;</div>
<div class="line">request.SortBy = <span class="stringliteral">&quot;Price&quot;</span>;</div>
<div class="line">request.Filters = <span class="keyword">new</span> Dictionary&lt;string, List&lt;string&gt;&gt;()</div>
<div class="line">{</div>
<div class="line">    { <span class="stringliteral">&quot;Brand&quot;</span>, <span class="keyword">new</span> List&lt;string&gt;() { <span class="stringliteral">&quot;Jif&quot;</span> } }</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Add the following paramaters to request for hidden fields</span></div>
<div class="line">request.HiddenFields = <span class="keyword">new</span> List&lt;string&gt;</div>
<div class="line">{</div>
<div class="line">    <span class="stringliteral">&quot;hidden_price_field&quot;</span>,</div>
<div class="line">    <span class="stringliteral">&quot;hidden_brand_field&quot;</span>,</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Add the following paramaters to request for hidden facets</span></div>
<div class="line">request.HiddenFacets = <span class="keyword">new</span> List&lt;string&gt;</div>
<div class="line">{</div>
<div class="line">    <span class="stringliteral">&quot;hidden_price_facet&quot;</span>,</div>
<div class="line">    <span class="stringliteral">&quot;hidden_brand_facet&quot;</span>,</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Create a UserInfo object with the unique device identifier and session</span></div>
<div class="line">UserInfo userInfo = <span class="keyword">new</span> UserInfo(<span class="stringliteral">&quot;device-id-1123123&quot;</span>, 5);</div>
<div class="line">request.UserInfo = userInfo;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Add a variations map to request specific variation attributes as an array or object (optional)</span></div>
<div class="line">VariationsMap variationsMap = <span class="keyword">new</span> VariationsMap();</div>
<div class="line">variationsMap.AddGroupByRule(<span class="stringliteral">&quot;url&quot;</span>, <span class="stringliteral">&quot;data.url&quot;</span>);</div>
<div class="line">variationsMap.AddValueRule(<span class="stringliteral">&quot;variation_id&quot;</span>, AggregationTypes.First, <span class="stringliteral">&quot;data.variation_id&quot;</span>);</div>
<div class="line">variationsMap.AddValueRule(<span class="stringliteral">&quot;deactivated&quot;</span>, AggregationTypes.First, <span class="stringliteral">&quot;data.deactivated&quot;</span>);</div>
<div class="line">request.VariationsMap = variationsMap;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Faceting expression to scope results, it is applied before other filters and doesn&#39;t affect facet counts</span></div>
<div class="line"><span class="keywordtype">string</span> preFilterExpressionJObject = <span class="stringliteral">@&quot;{</span></div>
<div class="line"><span class="stringliteral">    or: [</span></div>
<div class="line"><span class="stringliteral">        {</span></div>
<div class="line"><span class="stringliteral">        and:</span></div>
<div class="line"><span class="stringliteral">            [</span></div>
<div class="line"><span class="stringliteral">            { name: &#39;group_id&#39;, value: &#39;BrandXY&#39; },</span></div>
<div class="line"><span class="stringliteral">            { name: &#39;Color&#39;, value: &#39;red&#39; },</span></div>
<div class="line"><span class="stringliteral">        ],</span></div>
<div class="line"><span class="stringliteral">        },</span></div>
<div class="line"><span class="stringliteral">        {</span></div>
<div class="line"><span class="stringliteral">        and:</span></div>
<div class="line"><span class="stringliteral">            [</span></div>
<div class="line"><span class="stringliteral">            { name: &#39;Color&#39;, value: &#39;blue&#39; },</span></div>
<div class="line"><span class="stringliteral">            { name: &#39;Brand&#39;, value: &#39;XYZ&#39; },</span></div>
<div class="line"><span class="stringliteral">        ],</span></div>
<div class="line"><span class="stringliteral">        },</span></div>
<div class="line"><span class="stringliteral">    ],</span></div>
<div class="line"><span class="stringliteral">}&quot;</span>;</div>
<div class="line">JsonPrefilterExpression preFilterExpression = <span class="keyword">new</span> JsonPrefilterExpression(preFilterExpressionJObject);</div>
<div class="line">request.PreFilterExpression = preFilterExpression;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Request results as an object</span></div>
<div class="line">SearchResponse response = await constructorio.Search.GetSearchResults(request);</div>
</div><!-- fragment --><h1 class="doxsection"><a class="anchor" id="autotoc_md9"></a>
Retrieving Browse Results</h1>
<p>To retrieve browse results, you will need to create a <span class="tt">BrowseRequest</span>. When creating the <span class="tt">BrowseRequest</span> the filter name can be one of <span class="tt">collection_id</span>, <span class="tt">group_id</span>, or a facet name (i.e. Brand). In this request, you can also specify the number of results you want per page, the page you want, sorting instructions, and also filter the results by category or facets. If the results are for a specific user, you can also create a <span class="tt">UserInfo</span> object, which will allow you to retrieve personalized results.</p>
<div class="fragment"><div class="line"><span class="comment">// Create a BrowseRequest with the filter name and filter value to request results for</span></div>
<div class="line">BrowseRequest request = <span class="keyword">new</span> BrowseRequest(<span class="stringliteral">&quot;group_id&quot;</span>, <span class="stringliteral">&quot;8193&quot;</span>);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Add in additional parameters</span></div>
<div class="line">request.ResultsPerPage = 5;</div>
<div class="line">request.Page = 1;</div>
<div class="line">request.SortBy = <span class="stringliteral">&quot;Price&quot;</span>;</div>
<div class="line">request.Filters = <span class="keyword">new</span> Dictionary&lt;string, List&lt;string&gt;&gt;()</div>
<div class="line">{</div>
<div class="line">    { <span class="stringliteral">&quot;Brand&quot;</span>, <span class="keyword">new</span> List&lt;string&gt;() { <span class="stringliteral">&quot;Jif&quot;</span> } }</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Add the following paramaters to request for hidden fields</span></div>
<div class="line">request.HiddenFields = <span class="keyword">new</span> List&lt;string&gt;</div>
<div class="line">{</div>
<div class="line">    <span class="stringliteral">&quot;hidden_price_field&quot;</span>,</div>
<div class="line">    <span class="stringliteral">&quot;hidden_brand_field&quot;</span>,</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Add the following paramaters to request for hidden facets</span></div>
<div class="line">request.HiddenFacets = <span class="keyword">new</span> List&lt;string&gt;</div>
<div class="line">{</div>
<div class="line">    <span class="stringliteral">&quot;hidden_price_facet&quot;</span>,</div>
<div class="line">    <span class="stringliteral">&quot;hidden_brand_facet&quot;</span>,</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Create a UserInfo object with the unique device identifier and session</span></div>
<div class="line">UserInfo userInfo = <span class="keyword">new</span> UserInfo(<span class="stringliteral">&quot;device-id-1123123&quot;</span>, 5);</div>
<div class="line">request.UserInfo = userInfo;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Add a variations map to request specific variation attributes as an array or object (optional)</span></div>
<div class="line">VariationsMap variationsMap = <span class="keyword">new</span> VariationsMap();</div>
<div class="line">variationsMap.AddGroupByRule(<span class="stringliteral">&quot;url&quot;</span>, <span class="stringliteral">&quot;data.url&quot;</span>);</div>
<div class="line">variationsMap.AddValueRule(<span class="stringliteral">&quot;variation_id&quot;</span>, AggregationTypes.First, <span class="stringliteral">&quot;data.variation_id&quot;</span>);</div>
<div class="line">variationsMap.AddValueRule(<span class="stringliteral">&quot;deactivated&quot;</span>, AggregationTypes.First, <span class="stringliteral">&quot;data.deactivated&quot;</span>);</div>
<div class="line">request.VariationsMap = variationsMap;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Faceting expression to scope results, it is applied before other filters and doesn&#39;t affect facet counts</span></div>
<div class="line"><span class="keywordtype">string</span> preFilterExpressionJObject = <span class="stringliteral">@&quot;{</span></div>
<div class="line"><span class="stringliteral">    or: [</span></div>
<div class="line"><span class="stringliteral">        {</span></div>
<div class="line"><span class="stringliteral">        and:</span></div>
<div class="line"><span class="stringliteral">            [</span></div>
<div class="line"><span class="stringliteral">            { name: &#39;group_id&#39;, value: &#39;BrandXY&#39; },</span></div>
<div class="line"><span class="stringliteral">            { name: &#39;Color&#39;, value: &#39;red&#39; },</span></div>
<div class="line"><span class="stringliteral">        ],</span></div>
<div class="line"><span class="stringliteral">        },</span></div>
<div class="line"><span class="stringliteral">        {</span></div>
<div class="line"><span class="stringliteral">        and:</span></div>
<div class="line"><span class="stringliteral">            [</span></div>
<div class="line"><span class="stringliteral">            { name: &#39;Color&#39;, value: &#39;blue&#39; },</span></div>
<div class="line"><span class="stringliteral">            { name: &#39;Brand&#39;, value: &#39;XYZ&#39; },</span></div>
<div class="line"><span class="stringliteral">        ],</span></div>
<div class="line"><span class="stringliteral">        },</span></div>
<div class="line"><span class="stringliteral">    ],</span></div>
<div class="line"><span class="stringliteral">}&quot;</span>;</div>
<div class="line">JsonPrefilterExpression preFilterExpression = <span class="keyword">new</span> JsonPrefilterExpression(preFilterExpressionJObject);</div>
<div class="line">request.PreFilterExpression = preFilterExpression;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Request results as an object</span></div>
<div class="line">BrowseResponse response = await constructorio.Browse.GetBrowseResults(request);</div>
</div><!-- fragment --><h1 class="doxsection"><a class="anchor" id="autotoc_md10"></a>
Retrieving Browse Results for Item ID's</h1>
<p>To retrieve browse results for a supplied list of item ID's, you will need to create a <span class="tt">BrowseItemsRequest</span>. When creating the <span class="tt">BrowseItemsRequest</span> the <span class="tt">itemIds</span> parameter will be a list of item ID's. In this request, you can also specify the number of results you want per page, the page you want, sorting instructions, and also filter the results by category or facets. If the results are for a specific user, you can also create a <span class="tt">UserInfo</span> object, which will allow you to retrieve personalized results.</p>
<div class="fragment"><div class="line"><span class="comment">// Create a BrowseItemsRequest with the filter name and filter value to request results for</span></div>
<div class="line">BrowseItemsRequest request = <span class="keyword">new</span> BrowseItemsRequest(Arrays.asList(<span class="stringliteral">&quot;t-shirt-xxl&quot;</span>));</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Add in additional parameters</span></div>
<div class="line">request.ResultsPerPage = 5;</div>
<div class="line">request.Page = 1;</div>
<div class="line">request.SortBy = <span class="stringliteral">&quot;Price&quot;</span>;</div>
<div class="line">request.Filters = <span class="keyword">new</span> Dictionary&lt;string, List&lt;string&gt;&gt;()</div>
<div class="line">{</div>
<div class="line">    { <span class="stringliteral">&quot;Brand&quot;</span>, <span class="keyword">new</span> List&lt;string&gt;() { <span class="stringliteral">&quot;Jif&quot;</span> } }</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Add the following paramaters to request for hidden fields</span></div>
<div class="line">request.HiddenFields = <span class="keyword">new</span> List&lt;string&gt;</div>
<div class="line">{</div>
<div class="line">    <span class="stringliteral">&quot;hidden_price_field&quot;</span>,</div>
<div class="line">    <span class="stringliteral">&quot;hidden_brand_field&quot;</span>,</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Add the following paramaters to request for hidden facets</span></div>
<div class="line">request.HiddenFacets = <span class="keyword">new</span> List&lt;string&gt;</div>
<div class="line">{</div>
<div class="line">    <span class="stringliteral">&quot;hidden_price_facet&quot;</span>,</div>
<div class="line">    <span class="stringliteral">&quot;hidden_brand_facet&quot;</span>,</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Create a UserInfo object with the unique device identifier and session</span></div>
<div class="line">UserInfo userInfo = <span class="keyword">new</span> UserInfo(<span class="stringliteral">&quot;device-id-1123123&quot;</span>, 5);</div>
<div class="line">request.UserInfo = userInfo;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Request results as an object</span></div>
<div class="line">BrowseResponse response = await constructorio.Browse.GetBrowseItemsResults(request);</div>
</div><!-- fragment --><h1 class="doxsection"><a class="anchor" id="autotoc_md11"></a>
Retrieving Recommendation Results</h1>
<p>To retrieve recommendation results, you will need to create a <span class="tt">RecommendationsRequest</span>. In this request, you can also specify the number of results you want and the items (given the ids) that you want to retrieve recommendations for. If the results are for a specific user, you can also create a <span class="tt">UserInfo</span> object, which will allow you to retrieve personalized results.</p>
<div class="fragment"><div class="line"><span class="comment">// Create a RecommendationsRequest with the pod id to request results for</span></div>
<div class="line">RecommendationsRequest request = <span class="keyword">new</span> RecommendationsRequest(<span class="stringliteral">&quot;pdp_complementary_items&quot;</span>);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Add in additional parameters</span></div>
<div class="line">request.NumResults = 5;</div>
<div class="line">request.ItemIds = <span class="keyword">new</span> List&lt;string&gt; { <span class="stringliteral">&quot;9838172&quot;</span> };</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Optionally, set variation IDs to use as seeds for recommendations (requires item IDs)</span></div>
<div class="line">request.VariationIds = <span class="keyword">new</span> List&lt;string&gt; { <span class="stringliteral">&quot;variation_123&quot;</span>, <span class="stringliteral">&quot;variation_456&quot;</span> };</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Create a UserInfo object with the unique device identifier and session</span></div>
<div class="line">UserInfo userInfo = <span class="keyword">new</span> UserInfo(<span class="stringliteral">&quot;device-id-1123123&quot;</span>, 5);</div>
<div class="line">request.UserInfo = userInfo;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Add a variations map to request specific variation attributes as an array or object (optional)</span></div>
<div class="line">VariationsMap variationsMap = <span class="keyword">new</span> VariationsMap();</div>
<div class="line">variationsMap.AddGroupByRule(<span class="stringliteral">&quot;url&quot;</span>, <span class="stringliteral">&quot;data.url&quot;</span>);</div>
<div class="line">variationsMap.AddValueRule(<span class="stringliteral">&quot;variation_id&quot;</span>, AggregationTypes.First, <span class="stringliteral">&quot;data.variation_id&quot;</span>);</div>
<div class="line">variationsMap.AddValueRule(<span class="stringliteral">&quot;deactivated&quot;</span>, AggregationTypes.First, <span class="stringliteral">&quot;data.deactivated&quot;</span>);</div>
<div class="line">request.VariationsMap = variationsMap;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Request results as an object</span></div>
<div class="line">RecommendationsResponse response = await constructorio.Recommendations.GetRecommendationsResults(request);</div>
</div><!-- fragment --><h1 class="doxsection"><a class="anchor" id="autotoc_md12"></a>
Retrieving All Tasks</h1>
<p>To retrieve all tasks, you will need to create a <span class="tt">AllTasksRequest</span>. In this request you can also specify the page and number of results per page. The page and number of results per page will default to 1 and 20 respectively.</p>
<div class="fragment"><div class="line"><span class="comment">// Create a AllTasksRequest to request results for</span></div>
<div class="line">AllTasksRequest request = <span class="keyword">new</span> AllTasksRequest();</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Add in additional parameters</span></div>
<div class="line">request.Page = 2;</div>
<div class="line">request.ResultsPerPage = 10;</div>
<div class="line"> </div>
<div class="line"><span class="comment">//Request all tasks as an object</span></div>
<div class="line">AllTasksResponse response = await constructorio.Tasks.GetAllTasks(request);</div>
</div><!-- fragment --><h1 class="doxsection"><a class="anchor" id="autotoc_md13"></a>
Retrieving Task with Task ID</h1>
<p>To retrieve a specific task with a task_id, you will need to create a <span class="tt">TaskRequest</span>.</p>
<div class="fragment"><div class="line"><span class="comment">// Create a TaskRequest with the task_id to retrieve</span></div>
<div class="line">TaskRequest request = <span class="keyword">new</span> TaskRequest(<span class="stringliteral">&quot;12345&quot;</span>);</div>
<div class="line"> </div>
<div class="line"><span class="comment">//Request task as an object</span></div>
<div class="line">Task response = await constructorio.Tasks.GetTask(request);</div>
</div><!-- fragment --><h1 class="doxsection"><a class="anchor" id="autotoc_md14"></a>
Development</h1>
<h2 class="doxsection"><a class="anchor" id="autotoc_md15"></a>
Using VS Code</h2>
<ul>
<li>Download ".NET Core Test Explorer" Extension</li>
<li>In settings =&gt; .NET Core Test Explorer =&gt; Test Project Path: Constructorio_NET/Constructorio_NET.Tests</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md16"></a>
Building</h2>
<p>The project includes a build script that handles restore, build, and packaging:</p>
<div class="fragment"><div class="line"># Build in Release mode (default)</div>
<div class="line">./build.sh</div>
<div class="line"> </div>
<div class="line"># Build in Debug mode</div>
<div class="line">./build.sh Debug</div>
<div class="line"> </div>
<div class="line"># Build with tests</div>
<div class="line">./build.sh --test</div>
<div class="line"> </div>
<div class="line"># Build with clean</div>
<div class="line">./build.sh --clean</div>
<div class="line"> </div>
<div class="line"># Combine options</div>
<div class="line">./build.sh Release --test --clean</div>
</div><!-- fragment --><p>The build script will create a NuGet package in the <span class="tt">./artifacts</span> directory.</p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md17"></a>
Testing</h2>
<ul>
<li>Make sure you have .NET SDK V8 installed</li>
<li>Open your terminal and navigate to the test directory: <div class="fragment"><div class="line">cd src/Constructorio_NET.Tests/</div>
</div><!-- fragment --></li>
<li>Run the following command to execute tests: <div class="fragment"><div class="line">dotnet test</div>
</div><!-- fragment --></li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md18"></a>
For code coverage:</h2>
<ul>
<li>if initial setup:<ul>
<li>dotnet husky install</li>
</ul>
</li>
<li>dotnet husky run -g coverage</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md19"></a>
Publishing</h2>
<p>The project includes a publish script to push packages to NuGet:</p>
<div class="fragment"><div class="line"># Set your NuGet API key</div>
<div class="line">export NUGET_API_KEY=&quot;your-api-key&quot;</div>
<div class="line"> </div>
<div class="line"># Dry run to verify package details</div>
<div class="line">./publish.sh --dry-run</div>
<div class="line"> </div>
<div class="line"># Publish to NuGet (requires confirmation)</div>
<div class="line">./publish.sh</div>
</div><!-- fragment --><p>The publish script will:</p><ol type="1">
<li>Find the package in <span class="tt">./artifacts</span></li>
<li>Show package details and prompt for confirmation</li>
<li>Push to NuGet.org</li>
<li>Clean up the artifacts folder on success</li>
</ol>
<h2 class="doxsection"><a class="anchor" id="autotoc_md20"></a>
Documentation</h2>
<ul>
<li>Documentation generated by <a href="https://doxygen.nl/download.html">Doxygen</a> for Mac OS X 10.14 and later </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.16.1 </li>
  </ul>
</div>
</body>
</html>
